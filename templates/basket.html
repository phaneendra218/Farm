{% extends "base.html" %}

{% block content %}
<h2>Your Basket</h2>

{% if basket_items %}
    <div class="basket-container">
        {% for basket_item, item in basket_items %}
            <div class="basket-item-card">
                <h4>{{ item.name }}</h4>
                <p>Price: ₹{{ item.price }} /{{ item.unit }} x {{ basket_item.quantity }}</p>
                {% if item.image_path %}
                    <img src="{{ url_for('static', filename='uploads/' + item.image_path.split('/')[-1]) }}" alt="{{ item.name }}" style="width:150px; height:100px;">
                {% else %}
                    <p>No image available</p>
                {% endif %}
                <form method="POST" action="{{ url_for('remove_from_basket', item_id=item.id) }}" style="margin-top:10px;">
                    <button type="submit">Remove</button>
                </form>
            </div>
        {% endfor %}
    </div>

    <p><strong>Total Price:</strong> ₹{{ total_price }}</p>

    <!-- Proceed to checkout button -->
    <form method="POST" action="{{ url_for('checkout') }}">
        <button type="submit">Proceed to Checkout</button>
    </form>
    <a href="{{ url_for('items') }}" class="btn btn-secondary" style="margin-left: 10px;">Back to Items</a>
    <!-- <a href="{{ url_for('profile') }}" class="btn btn-secondary">
        <button type="button">Cancel</button>
    </a> -->
{% else %}
    <p>Your basket is empty.</p>
{% endif %}
{% endblock %}
