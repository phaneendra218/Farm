{% extends "base.html" %}

{% block content %}
<h2>Items</h2>

<!-- Check if there are any items to display -->
{% if items %}
    <div class="item-container">
        {% for item in items %}
            <div class="item-card">
                <h4>{{ item.name }}</h4>
                <p>Price: â‚¹{{ item.price }}</p>
                
                <!-- Display image if it exists -->
                {% if item.image_path %}
                    <img src="{{ url_for('static', filename='uploads/' + item.image_path.split('/')[-1]) }}" alt="{{ item.name }}" style="width:150px; height:100px;">
                {% else %}
                    <p>No image available</p>
                {% endif %}
                
                <!-- Quantity input for adding to basket -->
                <form method="POST" action="{{ url_for('add_to_basket', item_id=item.id) }}" style="margin-top:10px;">
                    <label for="quantity_{{ item.id }}">Quantity:</label>
                    <input type="number" name="quantity" id="quantity_{{ item.id }}" min="1" value="1" required>
                    <button type="submit">Add to Basket</button>
                </form>

                <!-- Admin actions -->
                {% if session.get('is_admin') %}
                    <form method="POST" action="{{ url_for('delete_item', item_id=item.id) }}" style="margin-top:10px;">
                        <button type="submit" onclick="return confirm('Are you sure you want to delete this item?');">Delete</button>
                    </form>

                    <!-- Hide or unhide the item -->
                    {% if item.is_hidden %}
                        <form method="POST" action="{{ url_for('unhide_item', item_id=item.id) }}" style="margin-top:10px;">
                            <button type="submit">Unhide</button>
                        </form>
                    {% else %}
                        <form method="POST" action="{{ url_for('hide_item', item_id=item.id) }}" style="margin-top:10px;">
                            <button type="submit">Hide</button>
                        </form>
                    {% endif %}
                {% endif %}

                <!-- Order item button -->
                <form method="POST" action="{{ url_for('order_item', item_id=item.id) }}" style="margin-top:10px;">
                    <input type="hidden" name="item_id" value="{{ item.id }}">
                    <button type="submit">Order</button>
                </form>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>No items available at the moment.</p>
{% endif %}

{% endblock %}
