{% extends "base.html" %}

{% block content %}
<h2>Items</h2>

<!-- Check if there are any items to display -->
{% if items %}
    <ul>
        {% for item in items %}
        <li>
            <strong>{{ item.name }}</strong> - â‚¹{{ item.price }}

            <!-- Quantity input for adding to basket -->
            <form method="POST" action="{{ url_for('add_to_basket', item_id=item.id) }}" style="display:inline;">
                <label for="quantity_{{ item.id }}">Quantity:</label>
                <input type="number" name="quantity" id="quantity_{{ item.id }}" min="1" value="1" required>
                <button type="submit">Add to Basket</button>
            </form>

            <!-- Admin delete button -->
            {% if session.get('is_admin') %}
                <form method="POST" action="{{ url_for('delete_item', item_id=item.id) }}" style="display:inline;">
                    <button type="submit" onclick="return confirm('Are you sure you want to delete this item?');">Delete</button>
                </form>

                <!-- Hide or unhide the item -->
                {% if item.is_hidden %}
                    <form method="POST" action="{{ url_for('unhide_item', item_id=item.id) }}" style="display:inline;">
                        <button type="submit">Unhide</button>
                    </form>
                {% else %}
                    <form method="POST" action="{{ url_for('hide_item', item_id=item.id) }}" style="display:inline;">
                        <button type="submit">Hide</button>
                    </form>
                {% endif %}
            {% endif %}

            <!-- Order item button -->
            <form method="POST" action="{{ url_for('order_item', item_id=item.id) }}" style="display:inline;">
                <input type="hidden" name="item_id" value="{{ item.id }}">
                <button type="submit">Order</button>
            </form>
        </li>
        {% endfor %}
    </ul>
{% else %}
    <p>No items available at the moment.</p>
{% endif %}

{% endblock %}
